# ğŸ‰å–œå¤§æ™®å¥”ï¼ŒES2019ç™»åœº

å°±åœ¨åˆš4ä¸ªå°æ—¶å‰ï¼ŒTC39å°†ä»¥ä¸‹ç‰¹æ€§åŠ å…¥åˆ°äº† ES2019 ä¸­ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›æ–°çš„ç‰¹æ€§ç»™æˆ‘ä»¬å¸¦æ¥äº†ä»€ä¹ˆæ ·çš„æ”¹å˜ã€‚

![1548822100255.jpg](https://user-gold-cdn.xitu.io/2019/1/30/1689cfe1dc0dc14c?w=1912&h=840&f=jpeg&s=209360)

# ES2019 æ–°ç‰¹æ€§:

â¡ï¸ Array#{flat,flatMap}

â¡ï¸ Object.fromEntries

â¡ï¸ String#{trimStart,trimEnd}

â¡ï¸ Symbol#description

â¡ï¸ try { } catch {} // optional binding

â¡ï¸ JSON âŠ‚ ECMAScript

â¡ï¸ well-formed JSON.stringify

â¡ï¸ stable Array#sort

â¡ï¸ revised Function#toString



## JSON âŠ‚ ECMAScript ï¼ˆJSON supersetï¼‰
è¡Œåˆ†éš”ç¬¦ï¼ˆU + 2028ï¼‰å’Œæ®µåˆ†éš”ç¬¦ï¼ˆU + 2029ï¼‰ç¬¦å·ç°åœ¨å…è®¸åœ¨å­—ç¬¦ä¸²æ–‡å­—ä¸­ï¼Œä¸JSONåŒ¹é…ã€‚ ä»¥å‰ï¼Œè¿™äº›ç¬¦å·åœ¨å­—ç¬¦ä¸²æ–‡å­—ä¸­è¢«è§†ä¸ºè¡Œç»ˆæ­¢ç¬¦ï¼Œå› æ­¤ä½¿ç”¨å®ƒä»¬ä¼šå¯¼è‡´SyntaxErrorå¼‚å¸¸ã€‚

## well-formed JSON.stringify

æ›´åŠ å‹å¥½çš„ JSON.stringify ï¼ˆä¿®å¤äº†å¯¹äºä¸€äº›è¶…å‡ºèŒƒå›´çš„ unicode å±•ç¤ºé”™è¯¯çš„é—®é¢˜ã€‚ï¼‰

å¦‚æœè¾“å…¥ Unicode æ ¼å¼ä½†æ˜¯è¶…å‡ºèŒƒå›´çš„å­—ç¬¦ï¼Œåœ¨åŸå…ˆJSON.stringifyè¿”å›æ ¼å¼é”™è¯¯çš„Unicodeå­—ç¬¦ä¸²ï¼š
```
JSON.stringify('\uD800');
// â†’ '"ï¿½"'
```
ç°åœ¨å®ç°äº†ä¸€ä¸ªæ”¹å˜JSON.stringifyçš„[ç¬¬3é˜¶æ®µææ¡ˆ](https://github.com/tc39/proposal-well-formed-stringify)ï¼Œå› æ­¤å®ƒä¸ºå…¶è¾“å‡ºè½¬ä¹‰åºåˆ—ï¼Œä½¿å…¶æˆä¸ºæœ‰æ•ˆUnicodeï¼ˆå¹¶ä»¥UTF-8è¡¨ç¤ºï¼‰ï¼š
```
JSON.stringify('\uD800');
// â†’ '"\\ud800"'
åœ¨ chrome æ§åˆ¶å°è¾“å‡ºçš„æ˜¯ '"\ud800"' ï¼Œä½†åªæ˜¯ä¸€ä¸ªæ˜¾ç¤ºå€¼ï¼Œ çœŸå®å€¼ä¸º'"\\ud800"'ã€‚

JSON.stringify('\uD800') === '"\\ud800"';
// â†’ true
```

## stable Array#sort
åœ¨ä»¥å‰ï¼Œsort å‡½æ•°ä¸­ï¼Œ10ä¸ªä»¥ä¸Šå…ƒç´ çš„æ•°ç»„ V8 ä½¿ç”¨ä¸ç¨³å®šçš„QuickSortï¼ˆå¿«æ’ã€‚ç°åœ¨ï¼Œä½¿ç”¨ç¨³å®šçš„TimSortç®—æ³•ã€‚ï¼‰

TimSortç®—æ³•: https://en.wikipedia.org/wiki/Timsort


## revised Function#toString

[Function.prototype.toString()](https://tc39.github.io/Function-prototype-toString-revision/)ç°åœ¨è¿”å›ç²¾ç¡®å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼å’Œæ³¨é‡Šã€‚åŸå…ˆå’Œç°åœ¨çš„æ¯”è¾ƒï¼š
```
// Note the comment between the `function` keyword
// and the function name, as well as the space following
// the function name.
function /* a comment */ foo () {}

// Previously:
foo.toString();
// â†’ 'function foo() {}'
//             ^ no comment
//                ^ no space

// Now:
foo.toString();
// â†’ 'function /* comment */ foo () {}'

```


## Array #{flat, flatMap}

æ•°ç»„é™ç»´ï¼Œé€’å½’åœ°å°†æ•°ç»„å±•å¹³åˆ°æŒ‡å®šçš„æ·±åº¦ï¼Œé»˜è®¤ä¸º1ã€‚

```
// Flatten one level:
const array = [1, [2, [3]]];
array.flat();
// â†’ [1, 2, [3]]

// Flatten recursively until the array contains no more nested arrays:
array.flat(Infinity);
// â†’ [1, 2, 3]
```

```
[2, 3, 4].flatMap((x) => [x, x * 2]);
// â†’ [2, 4, 3, 6, 4, 8]
```
---------
2019.1.31 æ›´æ–°
```
[2, 3, [2]].flatMap((x) => x + 1);
// [3, 4, "21"]
```
åˆšåˆšçœ‹åˆ°æœ‰äººå¯¹è¿™ä¸ªç»“æœæœ‰ç–‘é—®ï¼Œä»¥ä¸ºæ˜¯flatMapå†…éƒ¨æœ‰ä»€ä¹ˆæ“ä½œã€‚
å…¶å®è¿™ä¸ªæ˜¯ `addition-operator-plusï¼ˆ+ï¼‰`çš„åŸå› ã€‚ + ä¼šé€šè¿‡ `toprimitive` æŠŠæ•°ç»„è½¬åŒ–ä¸ºåŸºç¡€ç±»å‹Stringã€‚æ‰€ä»¥å°±æ˜¯ [2] + 1 è½¬åŒ–ä¸º "2" + 1 === "21"ã€‚ä¸‹é¢æ˜¯ä½è¯ï¼š

https://tc39.github.io/ecma262/#sec-addition-operator-plus
https://tc39.github.io/ecma262/#sec-toprimitive

--------
## Object.fromEntries

Object.fromEntriesï¼ˆObject.entriesï¼ˆobjectï¼‰ï¼‰â‰ˆ å¯¹è±¡

å®ƒç±»ä¼¼äºLodashçš„_.fromPairsã€‚

![DYEuv5nW0AA5qHz.png](https://user-gold-cdn.xitu.io/2019/1/30/1689cfaba49767a7?w=918&h=517&f=png&s=69354)


## String#{trimStart,trimEnd}

å‰åçš„ç©ºç™½ç¬¦å¯ä»¥æŒ‡å®šä¸€è¾¹å»é™¤ã€‚

```
const string = '  hello world  ';
string.trimStart();
// â†’ 'hello world  '
string.trimEnd();
// â†’ '  hello world'
string.trim();
// â†’ 'hello world'
```


## Symbol.prototype.description
é€šè¿‡å·¥å‚å‡½æ•°Symbolï¼ˆï¼‰åˆ›å»ºç¬¦å·æ—¶ï¼Œæ‚¨å¯ä»¥é€‰æ‹©é€šè¿‡å‚æ•°æä¾›å­—ç¬¦ä¸²ä½œä¸ºæè¿°ï¼š
```
const sym = Symbol('The description');
```
ä»¥å‰ï¼Œè®¿é—®æè¿°çš„å”¯ä¸€æ–¹æ³•æ˜¯å°†ç¬¦å·è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼š
```
assert.equal(String(sym), 'Symbol(The description)');
```
ç°åœ¨å¼•å…¥äº†getter Symbol.prototype.descriptionä»¥ç›´æ¥è®¿é—®æè¿°ï¼š
```
assert.equal(sym.description, 'The description');
```


## try {} catch {} 
ç°åœ¨try {} catch {} æœ‰äº†æ›´åŠ ç®€ä¾¿çš„æ–¹æ³•ï¼Œå˜æˆäº†å¯é€‰å‹ã€‚

åœ¨ä»¥å‰
```
try {} catch (e) {}
```

ç°åœ¨

![try-catch.png](https://user-gold-cdn.xitu.io/2019/1/30/1689cfaba4ba000c?w=1364&h=338&f=png&s=152974)


# æ›´å¤šææ¡ˆï¼š
https://github.com/tc39/proposals/blob/master/finished-proposals.md

# æ›´å¤šè¯·å…³æ³¨

![](https://user-gold-cdn.xitu.io/2019/1/24/1688055012ff10bc?w=500&h=500&f=png&s=19651)
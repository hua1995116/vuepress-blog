(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{434:function(t,a,s){"use strict";s.r(a);var n=s(44),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"未来的-javascript-应该是什么样的-现在还缺少什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#未来的-javascript-应该是什么样的-现在还缺少什么"}},[t._v("#")]),t._v(" 未来的 JavaScript 应该是什么样的？现在还缺少什么？")]),t._v(" "),s("blockquote",[s("p",[t._v("原文链接: http://2ality.com/2019/01/future-js.html\n作者：Axel Rauschmayer ; 著有《JavaScript for impatient programmers》、《Speaking JavaScript")])]),t._v(" "),s("p",[t._v("近年来，JavaScript的规模已经大大增加。这篇博客文章探讨了仍然缺失的内容。")]),t._v(" "),s("p",[t._v("说明：")]),t._v(" "),s("ol",[s("li",[t._v("我只列出了我发现最重要的缺失功能。 许多其他的功能也很有用，但也会带来因为增加太多而引起的风险。")]),t._v(" "),s("li",[t._v("我的选择列举这些功能是主观的。")]),t._v(" "),s("li",[t._v("本博客文章中提及的几乎所有内容都在TC39的预测上。 也就是说，它还可以作为未来可能的JavaScript 发展的预览。")])]),t._v(" "),s("p",[t._v("有关前两个问题的更多想法，请参阅"),s("a",{attrs:{href:"http://2ality.com/2019/01/future-js.html#language-design",target:"_blank",rel:"noopener noreferrer"}},[t._v("语言设计部分"),s("OutboundLink")],1),t._v(" (http://2ality.com/2019/01/future-js.html#language-design)。")]),t._v(" "),s("h1",{attrs:{id:"values"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#values"}},[t._v("#")]),t._v(" Values")]),t._v(" "),s("h2",{attrs:{id:"按值比较对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#按值比较对象"}},[t._v("#")]),t._v(" 按值比较对象")]),t._v(" "),s("p",[t._v("目前，JavaScript只比较原始值，例如字符串值（通过查看其内容）")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'abc'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'abc'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])]),s("p",[t._v("相比之下，对象通过引用进行比较（对象仅严格等于自身）：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("x: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", y: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("x: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", y: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n")])])]),s("p",[t._v("如果有一种方法可以创建按值进行比较的对象，那将是很好的：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("> #{x: 1, y: 4} === #{x: 1, y: 4}\ntrue\n")])])]),s("p",[t._v("另一种可能性是引入一种新的类(具体细节待定)")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("@"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ValueType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Point")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ···")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("提示：将类标记为值类型，是基于装饰器的草案。")]),t._v(" "),s("h2",{attrs:{id:"将对象放入数据结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将对象放入数据结构"}},[t._v("#")]),t._v(" 将对象放入数据结构")]),t._v(" "),s("p",[t._v("当对象通过引用进行比较时，将它们放入（non-weak）ECMAScript 数据结构（如Maps）中是没有意义的：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" m "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nassert"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("可以通过自定义值类型修复此问题。 或者可以自定义Set属性和Map键的管理。 例如:")]),t._v(" "),s("ul",[s("li",[t._v("通过哈希表映射: 需要一个用于检查等式的操作和另一个用于创建哈希码的操作。如果使用哈希码，则希望对象是不可变的。 否则，破坏数据结构就太容易了。")]),t._v(" "),s("li",[t._v("通过排序树映射: 需要一个比较两个值的操作，以管理它存储的值。")])]),t._v(" "),s("p",[t._v("Hash Map 意思是会给每个对象分配一个哈希值，来代表唯一性。但是对于这个传入的对象，需要是不可变的，否则的话，容易破坏数据结构。")]),t._v(" "),s("p",[t._v("Tree Map 或者需要比较两个对象的值操作以此来管理储存的值。")]),t._v(" "),s("p",[t._v("https://yikun.github.io/2015/04/06/Java-TreeMap%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%8F%8A%E5%AE%9E%E7%8E%B0/")]),t._v(" "),s("p",[t._v("https://juejin.im/entry/57bfab077db2a20068ebf9d2")]),t._v(" "),s("p",[t._v("https://blog.csdn.net/github_26672553/article/details/77185003")]),t._v(" "),s("p",[t._v("https://286.iteye.com/blog/2189266")]),t._v(" "),s("p",[t._v("https://www.cnblogs.com/skywang12345/p/3310928.html")]),t._v(" "),s("h2",{attrs:{id:"大型整数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#大型整数"}},[t._v("#")]),t._v(" 大型整数")]),t._v(" "),s("p",[t._v("JavaScript数字总是64位（双精度），它为整数提供53位加号。这意味着超过53位，你不能再代表每个数字了：")]),t._v(" "),s("div",{staticClass:"language-node extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("> 2 ** 53\n9007199254740992\n> (2 ** 53) + 1  // can’t be represented\n9007199254740992\n> (2 ** 53) + 2\n9007199254740994\n")])])]),s("p",[t._v("在某些情况下，这是一个相当大的限制。 现在有一个关于 "),s("code",[t._v("BigInts 的提案")]),t._v("[1]，即实数整数，其精度随着需要的增长而增长：")]),t._v(" "),s("p",[t._v("[1]提案地址：http://2ality.com/2017/03/es-integer.html")]),t._v(" "),s("div",{staticClass:"language-node extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("> 2n ** 53n\n9007199254740992n\n> (2n ** 53n) + 1n\n9007199254740993n\n")])])]),s("p",[t._v("BigInts 还支持强制转换，它可以给你提供固定位数的值：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" int64a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" BigInt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asUintN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12345n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" int64b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" BigInt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asUintN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("67890n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" BigInt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asUintN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" int64a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" int64b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"十进制计算"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#十进制计算"}},[t._v("#")]),t._v(" 十进制计算")]),t._v(" "),s("p",[t._v("JavaScript的数字是基于IEEE 754标准的64位浮点数（双精度数）。鉴于它们的表示形式是base-2，在处理小数分数时可能会出现舍入误差：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("> 0.1 + 0.2\n0.30000000000000004\n")])])]),s("p",[t._v("这在科学计算和金融技术（金融科技）中尤其成问题。目前有一项关于10进制数的建议处于 stage0。它们可能最终被这样使用（注意十进制数的后缀m）")]),t._v(" "),s("p",[t._v("提案地址：https://github.com/tc39/proposals/blob/master/stage-0-proposals.md")]),t._v(" "),s("h2",{attrs:{id:"对值进行分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对值进行分类"}},[t._v("#")]),t._v(" 对值进行分类")])])}),[],!1,null,null,null);a.default=e.exports}}]);
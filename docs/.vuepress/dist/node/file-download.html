<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä¸€æ–‡å¸¦ä½ å±‚å±‚è§£é”ã€Œæ–‡ä»¶ä¸‹è½½ã€çš„å¥¥ç§˜ | ç§‹é£çš„ç¬”è®°</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?fd8e413c5ce47d78c95f742fc41a7118";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <meta name="description" content="åç«¯/çº¯å‰ç«¯å®ç°å¤šç§æ–¹å¼æ–‡ä»¶ä¸‹è½½">
    <meta name="keywords" content="excel docx json mp4">
    
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/css/0.styles.4d3f24ea.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/app.e2f2ddea.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/3.55d2eec7.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/2.bf4393a2.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/84.f92609d9.js" as="script"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/10.adb7f5d7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/100.773fa0b3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/101.b63e7fd4.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/102.26a53407.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/103.60c44198.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/104.373a76a4.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/105.d9ffb1f9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/106.0e963ecb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/107.cf3d3170.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/108.c6c360f6.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/109.87241d35.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/11.ffe69b2d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/110.0712f686.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/111.e2673aef.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/112.1f03213f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/113.56a37084.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/114.5d08631c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/115.a6c7e75a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/116.3f0ccd52.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/117.c8d3492b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/118.b412033c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/119.1620d2a1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/12.6aaa2798.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/120.d8b46dd4.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/121.2cfca3d1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/122.17ce4dba.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/123.380938c5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/124.b6c85be6.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/125.076231ce.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/126.61fd3ff1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/127.cfd2fe7f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/128.89141911.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/129.2d94f969.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/13.305fb995.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/130.f34a900b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/131.5e993197.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/132.7098045d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/133.ce3ed9ec.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/134.18b9c97a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/135.b8a4e60d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/136.1c556efa.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/137.cee96649.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/138.60d488cd.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/139.b57caa0a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/14.503b6c58.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/140.4134b4fe.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/141.7ab5d0ee.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/142.de58693b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/143.71d4bf13.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/144.888462c2.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/145.f24d9b41.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/146.d4dedadb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/147.25c8177b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/148.8f4e0fad.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/149.bc89d14b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/15.099d420a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/16.5e00f06a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/17.64beadba.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/18.6fc4c758.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/19.9a6bc6e9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/20.95527118.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/21.9d3794cf.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/22.981ef776.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/23.b6090f36.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/24.f7ffdcfe.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/25.14a9a42d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/26.6cd766c5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/27.bd1625cc.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/28.0ad00d2f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/29.5b357834.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/30.1cc2e3da.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/31.2f131bdf.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/32.5c054d8a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/33.4d162763.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/34.a3cba041.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/35.01b0827c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/36.b9a9ca02.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/37.ecf2d460.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/38.4666f4d3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/39.e1b7580f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/4.febf3229.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/40.d35e09b9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/41.913a5c97.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/42.bbb0da56.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/43.c77b5e9f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/44.3e4deaa7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/45.3e6c8003.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/46.4600a6a3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/47.2a2df075.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/48.f418ea0c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/49.d9f5ee15.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/5.dc096b09.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/50.035c90cb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/51.a743efa7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/52.d5e395b9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/53.248de090.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/54.dab5b1cd.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/55.101fd494.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/56.270990b7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/57.6beb1084.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/58.1342d9be.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/59.9d8aa279.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/6.874d6a3f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/60.c306b0f5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/61.d5d6ae7f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/62.f2df4222.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/63.342219f4.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/64.3eea200c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/65.aa798b7b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/66.4c742cd9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/67.0e4a5bfe.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/68.94b3db03.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/69.ca648537.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/7.5cceb66b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/70.aa4e237b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/71.9dd5574e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/72.49ba29f3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/73.9579d4f8.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/74.5308e4e4.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/75.042433f2.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/76.a5edf5c7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/77.5fb57f45.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/78.3b1d427c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/79.ae491277.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/8.127e672d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/80.6799b8d4.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/81.df252079.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/82.048193da.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/83.e53d1f58.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/85.a490b4e9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/86.5d98f3ef.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/87.b32a7c9e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/88.d9b8f166.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/89.5b767987.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/9.4b6ccd84.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/90.6c839b29.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/91.2a40191e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/92.21acb7a1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/93.d7c1a176.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/94.988467ef.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/95.97b4cc94.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/96.bfd4d120.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/97.233d61ab.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/98.683af58b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/99.2bda2616.js">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/css/0.styles.4d3f24ea.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ç§‹é£çš„ç¬”è®°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">ä¸»é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯ç³»åˆ—" class="dropdown-title"><span class="title">å‰ç«¯ç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/" class="nav-link">jsæ–‡ç« </a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">reactå®è·µ</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">vueå®è·µ</a></li><li class="dropdown-item"><!----> <a href="/debug/" class="nav-link">debugç³»åˆ—</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">webpackç³»åˆ—</a></li><li class="dropdown-item"><!----> <a href="/canvas/" class="nav-link">canvasç³»åˆ—</a></li></ul></div></div><div class="nav-item"><a href="/svelte/" class="nav-link">Svelteç³»åˆ—</a></div><div class="nav-item"><a href="/node/" class="nav-link router-link-active">Nodeç³»åˆ—</a></div><div class="nav-item"><a href="/interview/" class="nav-link">é¢è¯•</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">ç®—æ³•</a></div><div class="nav-item"><a href="/op/" class="nav-link">å‰ç«¯è¿ç»´</a></div><div class="nav-item"><a href="/open/" class="nav-link">å¼€æºé¡¹ç›®</a></div> <a href="https://github.com/hua1995116/vuepress-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">ä¸»é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯ç³»åˆ—" class="dropdown-title"><span class="title">å‰ç«¯ç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/" class="nav-link">jsæ–‡ç« </a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">reactå®è·µ</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">vueå®è·µ</a></li><li class="dropdown-item"><!----> <a href="/debug/" class="nav-link">debugç³»åˆ—</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">webpackç³»åˆ—</a></li><li class="dropdown-item"><!----> <a href="/canvas/" class="nav-link">canvasç³»åˆ—</a></li></ul></div></div><div class="nav-item"><a href="/svelte/" class="nav-link">Svelteç³»åˆ—</a></div><div class="nav-item"><a href="/node/" class="nav-link router-link-active">Nodeç³»åˆ—</a></div><div class="nav-item"><a href="/interview/" class="nav-link">é¢è¯•</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">ç®—æ³•</a></div><div class="nav-item"><a href="/op/" class="nav-link">å‰ç«¯è¿ç»´</a></div><div class="nav-item"><a href="/open/" class="nav-link">å¼€æºé¡¹ç›®</a></div> <a href="https://github.com/hua1995116/vuepress-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div style="padding-left:1.5rem;"><div class="qr"><img src="https://s3.qiufeng.blue/blog/erweima.jpg" alt="ç§‹é£çš„æ¯”è¾ƒ" width="120" height="120" loading="lazy"> <p class="we-intro">
    å¦‚æœä½ å¯¹å‰ç«¯ï¼ŒNodeï¼Œå¼€æºé¡¹ç›®æ„Ÿå…´è¶£è¯·å…³æ³¨æˆ‘çš„å…¬ä¼—å· <a target="_blank" href="https://mp.weixin.qq.com/s/pKoliWlgtV-qm6orbyTz0Q">ç§‹é£çš„ç¬”è®°</a>ã€‚
  </p></div></div> <ul class="sidebar-links"><li><a href="/node/mutiple-download.html" class="sidebar-link">å‰ç«¯å¤šçº¿ç¨‹å¤§æ–‡ä»¶ä¸‹è½½å®è·µï¼Œæé€Ÿ10å€+</a></li><li><a href="/node/file-download.html" aria-current="page" class="active sidebar-link">ä¸€æ–‡å¸¦ä½ å±‚å±‚è§£é”ã€Œæ–‡ä»¶ä¸‹è½½ã€çš„å¥¥ç§˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node/file-download.html#å‰è¨€" class="sidebar-link">å‰è¨€</a></li><li class="sidebar-sub-header"><a href="/node/file-download.html#åç«¯" class="sidebar-link">åç«¯</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node/file-download.html#åç«¯è¿”å›æ–‡ä»¶æµ" class="sidebar-link">åç«¯è¿”å›æ–‡ä»¶æµ</a></li><li class="sidebar-sub-header"><a href="/node/file-download.html#åç«¯è¿”å›é™æ€ç«™ç‚¹åœ°å€" class="sidebar-link">åç«¯è¿”å›é™æ€ç«™ç‚¹åœ°å€</a></li><li class="sidebar-sub-header"><a href="/node/file-download.html#åç«¯è¿”å›å­—ç¬¦ä¸²-base64" class="sidebar-link">åç«¯è¿”å›å­—ç¬¦ä¸²ï¼ˆbase64ï¼‰</a></li></ul></li><li class="sidebar-sub-header"><a href="/node/file-download.html#çº¯å‰ç«¯" class="sidebar-link">çº¯å‰ç«¯</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node/file-download.html#json-text" class="sidebar-link">json/text</a></li><li class="sidebar-sub-header"><a href="/node/file-download.html#excel" class="sidebar-link">excel</a></li><li class="sidebar-sub-header"><a href="/node/file-download.html#word" class="sidebar-link">word</a></li><li class="sidebar-sub-header"><a href="/node/file-download.html#zipä¸‹è½½" class="sidebar-link">zipä¸‹è½½</a></li><li class="sidebar-sub-header"><a href="/node/file-download.html#æµè§ˆå™¨æ–‡ä»¶ç³»ç»Ÿ-å®éªŒæ€§" class="sidebar-link">æµè§ˆå™¨æ–‡ä»¶ç³»ç»Ÿï¼ˆå®éªŒæ€§ï¼‰</a></li></ul></li><li class="sidebar-sub-header"><a href="/node/file-download.html#å…¶ä»–åœºæ™¯" class="sidebar-link">å…¶ä»–åœºæ™¯</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node/file-download.html#h5æ–‡ä»¶ä¸‹è½½" class="sidebar-link">H5æ–‡ä»¶ä¸‹è½½</a></li><li class="sidebar-sub-header"><a href="/node/file-download.html#å¤§æ–‡ä»¶çš„åˆ†ç‰‡ä¸‹è½½" class="sidebar-link">å¤§æ–‡ä»¶çš„åˆ†ç‰‡ä¸‹è½½</a></li></ul></li><li class="sidebar-sub-header"><a href="/node/file-download.html#æ€»ç»“" class="sidebar-link">æ€»ç»“</a></li><li class="sidebar-sub-header"><a href="/node/file-download.html#å‚è€ƒèµ„æ–™" class="sidebar-link">å‚è€ƒèµ„æ–™</a></li><li class="sidebar-sub-header"><a href="/node/file-download.html#æœ€å" class="sidebar-link">æœ€å</a></li></ul></li><li><a href="/node/upload.html" class="sidebar-link"> ä¸€æ–‡äº†è§£æ–‡ä»¶ä¸Šä¼ å…¨è¿‡ç¨‹ï¼ˆ1.8wå­—æ·±åº¦è§£æï¼Œè¿›é˜¶å¿…å¤‡ï¼‰</a></li><li><a href="/node/color.html" class="sidebar-link"> è®©æµè§ˆå™¨æ·»ä¸Šç»ˆç«¯çš„å½©</a></li><li><a href="/node/crawler.html" class="sidebar-link"> æ‰‹æŠŠæ‰‹æ•™ä½ å¤šé¡µé¢é€’å½’çˆ¬è™«--åŸºäºNode.Js</a></li><li><a href="/node/node-addon.html" class="sidebar-link"> Node + NAPI å®ç° C++ æ‰©å±• - LRU æ·˜æ±°ç®—æ³•</a></li><li><a href="/node/node-cli-count.html" class="sidebar-link"> å¼€å‘ä¸€ä¸ªNodeå°ç©å…·å…¨è¿‡ç¨‹</a></li><li><a href="/node/node-git-down.html" class="sidebar-link"> å¯¹ç—‡ä¸‹è¯ï¼Œå¿«é€Ÿä¸‹è½½githubå•ä¸ªæ–‡ä»¶å¤¹</a></li><li><a href="/node/pkg.html" class="sidebar-link"> pkgç‰ˆæœ¬è§„èŒƒç®¡ç†è‡ªåŠ¨åŒ–æœ€ä½³å®è·µ</a></li><li><a href="/node/shark-cleaner.html" class="sidebar-link"> shark-cleaner: ä¸€ä¸ªNode Cli å®ç°çš„åƒåœ¾æ¸…ç†å·¥å…·(æ·±å±‚æ¸…ç†å¼€å‘åƒåœ¾)</a></li><li><a href="/node/translate.html" class="sidebar-link"> ä¸€ä¸ªå…è´¹åŠŸèƒ½å¼ºå¤§çš„è°·æ­Œç¿»è¯‘api</a></li></ul> </aside> <!----> <!----> <main class="page"><div class="theme-default-content" style="margin-top:3.6rem;padding-top:0;padding-bottom:0;"><div class="bar-container"><div class="bar-intro"><div class="text"><p>é˜¿é‡Œäº‘ä¼˜æƒ æ´»åŠ¨ï¼Œç‚¹å‡»é“¾æ¥è¿›è¡Œè´­ä¹°: <a href="https://www.aliyun.com/minisite/goods?userCode=qtt5ztpk">ä¸€å¹´ä»…éœ€96.9å…ƒå³å¯ä»¥è´­ä¹°æœåŠ¡å™¨~ </a></p> <p>è…¾è®¯äº‘ä¼˜æƒ æ´»åŠ¨, ç‚¹å‡»é“¾æ¥è¿›è¡Œè´­ä¹°<a href="https://curl.qcloud.com/mcBHz0hb">ä¸€å¹´ä»…éœ€99å…ƒ</a></p> <p>è…¾è®¯äº‘é™æ—¶å¼€å›¢æ´»åŠ¨, ç‚¹å‡»é“¾æ¥è¿›è¡Œè´­ä¹°<a href="https://cloud.tencent.com/act/cvmgift?hash=K468jiO7GIO6QaYN">ä¸€å¹´ä»…éœ€95å…ƒ</a></p> <p><a href="/op/service-choice.html">å„å¤§æœåŠ¡å™¨å‚å•†å¯¹æ¯”é€‰è´­</a></p></div></div></div> <!----></div> <div class="theme-default-content"><div class="content__default"><h1 id="ä¸€æ–‡å¸¦ä½ å±‚å±‚è§£é”ã€Œæ–‡ä»¶ä¸‹è½½ã€çš„å¥¥ç§˜"><a href="#ä¸€æ–‡å¸¦ä½ å±‚å±‚è§£é”ã€Œæ–‡ä»¶ä¸‹è½½ã€çš„å¥¥ç§˜" class="header-anchor">#</a> ä¸€æ–‡å¸¦ä½ å±‚å±‚è§£é”ã€Œæ–‡ä»¶ä¸‹è½½ã€çš„å¥¥ç§˜</h1> <p>å¤§å®¶å¥½æˆ‘æ˜¯ç§‹é£ï¼Œä»Šå¤©å¸¦æ¥çš„ä¸»é¢˜æ˜¯å…³äº<code>æ–‡ä»¶ä¸‹è½½</code>ï¼Œåœ¨æˆ‘ä¹‹å‰æ›¾ç»å‘è¿‡ä¸€ç¯‡æ–‡ä»¶ä¸Šä¼ çš„æ–‡ç« ï¼ˆ<a href="https://juejin.im/post/6844904106658643982" target="_blank" rel="noopener noreferrer">ä¸€æ–‡äº†è§£æ–‡ä»¶ä¸Šä¼ å…¨è¿‡ç¨‹ï¼ˆ1.8wå­—æ·±åº¦è§£æï¼Œè¿›é˜¶å¿…å¤‡<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 200+ç‚¹èµï¼‰ï¼Œåå“è¿˜ä¸é”™ï¼Œæ—¶éš”å¤šæ—¥ï¼Œç”±äºæœ€è¿‘æœ‰ç ”ç©¶ä¸€äº›åª’ä½“ç›¸å…³çš„å·¥ä½œï¼Œå› æ­¤æ‰“ç®—å¯¹ä¸‹è½½åšä¸€ä¸ªæ•´ç†ï¼Œå› æ­¤ä»–çš„å…„å¼Ÿç¯‡è¯ç”Ÿäº†ï¼Œå¸¦ä½ é¢†ç•¥æ–‡ä»¶ä¸‹è½½çš„å¥¥ç§˜ã€‚æœ¬æ–‡ä¼šèŠ±è´¹ä½ è¾ƒé•¿çš„æ—¶é—´é˜…è¯»ï¼Œå»ºè®®å…ˆæ”¶è—/ç‚¹èµï¼Œç„¶åæŸ¥çœ‹ä½ æ„Ÿå…´è¶£çš„éƒ¨åˆ†ï¼Œå¹³æ—¶ä¹Ÿå¯ä»¥å……å½“å½“åšå­—å…¸çš„æ•ˆæœæ¥æŸ¥è¯¢ã€‚</p> <p>ğŸ˜ƒ ä¸æ•´ä¸çŸ¥é“ï¼Œä¸€æ•´ï¼Œå±…ç„¶æ•´å‡ºè¿™ä¹ˆå¤šæƒ…å†µï¼Œæˆ‘åªæ˜¯æƒ³ç®€å•åœ°åšä¸ªé¡µé¢ä»”ã€‚</p> <h2 id="å‰è¨€"><a href="#å‰è¨€" class="header-anchor">#</a> å‰è¨€</h2> <p>ä¸€å›¾è§ˆå…¨æ–‡ï¼Œå¯ä»¥å…ˆçœ‹çœ‹å¤§çº²é€‚ä¸é€‚åˆè‡ªå·±ï¼Œå¦‚æœä½ å–œæ¬¢åˆ™ç»§ç»­å¾€ä¸‹é˜…è¯»ã€‚</p> <p><img src="https://s3.qiufeng.blue/blog/%E4%B8%80%E6%96%87%E4%BA%86%E8%A7%A3%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD.png" alt="ä¸€æ–‡äº†è§£æ–‡ä»¶ä¸‹è½½"></p> <p>è¿™ä¸€èŠ‚å‘¢ï¼Œä¸»è¦ä»‹ç»ä¸€äº›å‰ç½®çŸ¥è¯†ï¼Œå¯¹ä¸€äº›åŸºç¡€çŸ¥è¯†çš„ä»‹ç»ï¼Œå¦‚æœä½ è§‰å¾—ä½ æ˜¯è¿™ä¸ªã€‚â¬‡ï¸â¬‡ï¸â¬‡ï¸ï¼Œä½ å¯ä»¥è·³è¿‡å‰è¨€ã€‚</p> <p><img src="http://wx2.sinaimg.cn/bmiddle/ceeb653ely1g0tken1v5aj20ly0iqgm8.jpg" alt="å’Œè£è€€ç‹è€…è¯´ä½ å˜›å‘¢ï¼Ÿ_è£è€€_ç‹è€…è¡¨æƒ…"></p> <p>å‰ç«¯çš„æ–‡ä»¶ä¸‹è½½ä¸»è¦æ˜¯é€šè¿‡ <code>&lt;a&gt;</code> ï¼Œå†åŠ ä¸Š <code>download</code>å±æ€§,æœ‰äº†å®ƒä»¬è®©æˆ‘ä»¬çš„ä¸‹è½½å˜å¾—ç®€å•ã€‚</p> <p><code>download</code>æ­¤å±æ€§æŒ‡ç¤ºæµè§ˆå™¨ä¸‹è½½ URL è€Œä¸æ˜¯å¯¼èˆªåˆ°å®ƒï¼Œå› æ­¤å°†æç¤ºç”¨æˆ·å°†å…¶ä¿å­˜ä¸ºæœ¬åœ°æ–‡ä»¶ã€‚å¦‚æœå±æ€§æœ‰ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆæ­¤å€¼å°†åœ¨ä¸‹è½½ä¿å­˜è¿‡ç¨‹ä¸­ä½œä¸ºé¢„å¡«å……çš„æ–‡ä»¶åï¼ˆå¦‚æœç”¨æˆ·éœ€è¦ï¼Œä»ç„¶å¯ä»¥æ›´æ”¹æ–‡ä»¶åï¼‰ã€‚æ­¤å±æ€§å¯¹å…è®¸çš„å€¼æ²¡æœ‰é™åˆ¶ï¼Œä½†æ˜¯ <code>/</code> å’Œ <code>\</code> ä¼šè¢«è½¬æ¢ä¸ºä¸‹åˆ’çº¿ã€‚å¤§å¤šæ•°æ–‡ä»¶ç³»ç»Ÿé™åˆ¶äº†æ–‡ä»¶åä¸­çš„æ ‡ç‚¹ç¬¦å·ï¼Œæ•…æ­¤ï¼Œæµè§ˆå™¨å°†ç›¸åº”åœ°è°ƒæ•´å»ºè®®çš„æ–‡ä»¶åã€‚( æ‘˜è‡ª https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/a)</p> <blockquote><p><strong>æ³¨æ„:</strong></p> <ul><li>æ­¤å±æ€§ä»…é€‚ç”¨äº<a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy" target="_blank" rel="noopener noreferrer">åŒæº URL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</li> <li>å°½ç®¡ HTTP URL éœ€è¦ä½äºåŒä¸€æºä¸­ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/URL.createObjectURL" target="_blank" rel="noopener noreferrer"><code>blob:</code> URL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" target="_blank" rel="noopener noreferrer"><code>data:</code> URL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼Œä»¥æ–¹ä¾¿ç”¨æˆ·ä¸‹è½½ä½¿ç”¨ JavaScript ç”Ÿæˆçš„å†…å®¹ï¼ˆä¾‹å¦‚ä½¿ç”¨åœ¨çº¿ç»˜å›¾ Web åº”ç”¨ç¨‹åºåˆ›å»ºçš„ç…§ç‰‡ï¼‰ã€‚</li></ul></blockquote> <p>å› æ­¤ä¸‹è½½ url ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ã€‚(æœ¬æ–‡å¤§éƒ¨åˆ†ä»¥ blob çš„æ–¹å¼è¿›è¡Œæ¼”ç¤º)</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200830153314861.png" alt="image-20200830153314861"></p> <p><strong>å…¼å®¹æ€§</strong></p> <p>å¯ä»¥çœ‹åˆ°å®ƒçš„å…¼å®¹æ€§ä¹Ÿéå¸¸çš„å¯è§‚ï¼ˆhttps://www.caniuse.com/#search=downloadï¼‰</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200817232216749.png" alt="image-20200817232216749"></p> <p>ä¸ºäº†é¿å…å¾ˆå¤šä»£ç çš„é‡å¤æ€§ï¼Œå› ä¸ºæˆ‘æŠ½ç¦»å‡ºäº†å‡ ä¸ªå…¬å…±å‡½æ•°ã€‚(è¯¥éƒ¨åˆ†å¯è·³è¿‡ï¼Œåå­—éƒ½æ¯”è¾ƒå¯è¯»ï¼Œä¹‹åè‹¥æ˜¯é‡åˆ°ä¸æ˜ç™½åˆ™å¯ä»¥åœ¨è¿™é‡Œå¯»æ‰¾)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">downloadDirect</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> aTag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span>download <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">downloadByContent</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> filename<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> aTag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span>download <span class="token operator">=</span> filename<span class="token punctuation">;</span>
    <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>content<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> blobUrl <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span>href <span class="token operator">=</span> blobUrl<span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">downloadByDataURL</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> filename<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> aTag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span>download <span class="token operator">=</span> filename<span class="token punctuation">;</span>
    <span class="token keyword">const</span> dataUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">data:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;base64,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>window<span class="token punctuation">.</span><span class="token function">btoa</span><span class="token punctuation">(</span><span class="token function">unescape</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span>href <span class="token operator">=</span> dataUrl<span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">downloadByBlob</span><span class="token punctuation">(</span><span class="token parameter">blob<span class="token punctuation">,</span> filename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> aTag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span>download <span class="token operator">=</span> filename<span class="token punctuation">;</span>
    <span class="token keyword">const</span> blobUrl <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span>href <span class="token operator">=</span> blobUrl<span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">base64ToBlob</span><span class="token punctuation">(</span><span class="token parameter">base64<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> byteCharacters <span class="token operator">=</span> <span class="token function">atob</span><span class="token punctuation">(</span>base64<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> byteNumbers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>byteCharacters<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> byteCharacters<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        byteNumbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> byteCharacters<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> buffer <span class="token operator">=</span> Uint8Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>byteNumbers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>buffer<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> blob<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…ğŸš…</p> <p>(æ‰‹åŠ¨ç»™ä¸çœ‹ä»¥ä¸Šå†…å®¹çš„å¤§ä½¬ç”»åˆ†å‰²çº¿ï¼‰</p> <p>ğŸ‡¨ğŸ‡³</p> <blockquote><p>æ‰€æœ‰ç¤ºä¾‹Githubåœ°å€:  https://github.com/hua1995116/node-demo/tree/master/file-download</p> <p>åœ¨çº¿Demo: https://qiufeng.blue/demo/file-download/index.html</p></blockquote> <p><img src="https://s3.qiufeng.blue/blog/%E5%89%8D%E7%AB%AF%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD.png" alt="å‰ç«¯æ–‡ä»¶ä¸‹è½½"></p> <h2 id="åç«¯"><a href="#åç«¯" class="header-anchor">#</a> åç«¯</h2> <blockquote><p>æœ¬æ–‡åç«¯æ‰€æœ‰ç¤ºä¾‹å‡ä»¥ koa / åŸç”Ÿ js å®ç°ã€‚</p></blockquote> <h3 id="åç«¯è¿”å›æ–‡ä»¶æµ"><a href="#åç«¯è¿”å›æ–‡ä»¶æµ" class="header-anchor">#</a> åç«¯è¿”å›æ–‡ä»¶æµ</h3> <p>è¿™ç§æƒ…å†µéå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æ¥å°†åç«¯è¿”å›çš„æ–‡ä»¶æµä»¥æ–°çš„çª—å£æ‰“å¼€ï¼Œå³å¯ç›´æ¥ä¸‹è½½äº†ã€‚</p> <div class="language-html extra-class"><pre class="language-html"><code>// å‰ç«¯ä»£ç 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oBtnDownload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹å‡»ä¸‹è½½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
oBtnDownload<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8888/api/download?filename=1597375650384.jpg'</span><span class="token punctuation">,</span> <span class="token string">'_blank'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// åç«¯ä»£ç </span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/download'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> filename <span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
    <span class="token keyword">const</span> fStats <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./static/'</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/octet-stream'</span><span class="token punctuation">,</span>
        <span class="token string">'Content-Disposition'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">attachment; filename=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>filename<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token string">'Content-Length'</span><span class="token operator">:</span> fStats<span class="token punctuation">.</span>size
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./static/'</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>èƒ½å¤Ÿè®©æµè§ˆå™¨è‡ªåŠ¨ä¸‹è½½æ–‡ä»¶ï¼Œä¸»è¦æœ‰ä¸¤ç§æƒ…å†µ:</p> <p><strong>ä¸€ç§ä¸ºä½¿ç”¨äº†<code>Content-Disposition</code>å±æ€§ã€‚</strong></p> <p>æˆ‘ä»¬æ¥çœ‹çœ‹è¯¥å­—æ®µçš„æè¿°ã€‚</p> <blockquote><p>åœ¨å¸¸è§„çš„HTTPåº”ç­”ä¸­ï¼Œ<code>Content-Disposition</code> å“åº”å¤´æŒ‡ç¤ºå›å¤çš„å†…å®¹è¯¥ä»¥ä½•ç§å½¢å¼å±•ç¤ºï¼Œæ˜¯ä»¥<strong>å†…è”</strong>çš„å½¢å¼ï¼ˆå³ç½‘é¡µæˆ–è€…é¡µé¢çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œè¿˜æ˜¯ä»¥<strong>é™„ä»¶</strong>çš„å½¢å¼ä¸‹è½½å¹¶ä¿å­˜åˆ°æœ¬åœ°   --- æ¥æº MDN(https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition)</p></blockquote> <p>å†æ¥çœ‹çœ‹å®ƒçš„è¯­æ³•</p> <div class="language- extra-class"><pre class="language-text"><code>Content-Disposition: inline
Content-Disposition: attachment
Content-Disposition: attachment; filename=&quot;filename.jpg&quot;
</code></pre></div><p>å¾ˆç®€å•ï¼Œåªè¦è®¾ç½®æˆæœ€åä¸€ç§å½¢æ€æˆ‘å°±èƒ½æˆåŠŸè®©æ–‡ä»¶ä»åç«¯è¿›è¡Œä¸‹è½½äº†ã€‚</p> <p><strong>å¦ä¸€ç§ä¸ºæµè§ˆå™¨æ— æ³•è¯†åˆ«çš„ç±»å‹</strong></p> <p>ä¾‹å¦‚è¾“å…¥ http://localhost:8888/static/demo.shï¼Œæµè§ˆå™¨æ— æ³•è¯†åˆ«è¯¥ç±»å‹ï¼Œå°±ä¼šè‡ªåŠ¨ä¸‹è½½ã€‚</p> <p>ä¸çŸ¥é“å°ä¼™ä¼´ä»¬æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„ä¸€ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬è¾“å…¥ä¸€ä¸ªæ­£ç¡®çš„é™æ€ js åœ°å€ï¼Œæ²¡æœ‰é…ç½®<code>Content-Disposition</code>ï¼Œä½†æ˜¯å´ä¼šè¢«æ„å¤–çš„ä¸‹è½½ã€‚</p> <p>ä¾‹å¦‚åƒä»¥ä¸‹çš„æƒ…å†µã€‚</p> <p><img src="https://s3.qiufeng.blue/blog/2020-08-30-17.01.52.gif" alt="2020-08-30-17.01.52"></p> <p><img src="https://s3.qiufeng.blue/blog/006r3PQBjw1fav4dsikh6j308c0g5gm1.jpg" alt="006r3PQBjw1fav4dsikh6j308c0g5gm1"></p> <p>è¿™å¾ˆå¯èƒ½æ˜¯ç”±äºä½ çš„ <code>nginx</code> å°‘äº†è¿™ä¸€è¡Œé…ç½®.</p> <div class="language- extra-class"><pre class="language-text"><code>include mime.types;
</code></pre></div><p>å¯¼è‡´é»˜è®¤èµ°äº† <code>application/octet-stream</code>ï¼Œæµè§ˆå™¨æ— æ³•è¯†åˆ«å°±ä¸‹è½½äº†æ–‡ä»¶ã€‚</p> <h3 id="åç«¯è¿”å›é™æ€ç«™ç‚¹åœ°å€"><a href="#åç«¯è¿”å›é™æ€ç«™ç‚¹åœ°å€" class="header-anchor">#</a> åç«¯è¿”å›é™æ€ç«™ç‚¹åœ°å€</h3> <p>é€šè¿‡é™æ€ç«™ç‚¹ä¸‹è½½ï¼Œè¿™é‡Œè¦åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œä¸€ç§ä¸ºå¯èƒ½è¯¥æœåŠ¡è‡ªå¸¦é™æ€ç›®å½•ï¼Œå³ä¸ºåŒæºæƒ…å†µï¼Œç¬¬äºŒç§æƒ…å†µä¸ºé€‚ç”¨äº†ç¬¬ä¸‰æ–¹é™æ€å­˜å‚¨å¹³å°ï¼Œä¾‹å¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ä¹‹ç±»çš„è¿›è¡Œæ‰˜ç®¡ï¼Œå³éåŒæºï¼ˆå½“ç„¶ä¹Ÿæœ‰äº›å¹³å°ç›´æ¥ä¼šè¿”å›ï¼‰ã€‚</p> <h4 id="åŒæº"><a href="#åŒæº" class="header-anchor">#</a> åŒæº</h4> <p>åŒæºæƒ…å†µä¸‹æ˜¯éå¸¸ç®€å•ï¼Œå…ˆä¸Šä»£ç ï¼Œç›´æ¥è°ƒç”¨ä¸€ä¸‹å‡½æ•°å°±èƒ½è½»æ¾å®ç°ä¸‹è½½ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>downloadDirect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../js/utils.js'</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8888/api/downloadUrl'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">downloadDirect</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="éåŒæº"><a href="#éåŒæº" class="header-anchor">#</a> éåŒæº</h4> <p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä» MDN ä¸Šçœ‹åˆ°ï¼Œè™½ç„¶ download é™åˆ¶äº†éåŒæºçš„æƒ…å†µï¼Œä½†æ˜¯ï¼ï¼ä½†æ˜¯ï¼ï¼ä½†æ˜¯å¯ä»¥ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/URL.createObjectURL" target="_blank" rel="noopener noreferrer"><code>blob:</code> URL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" target="_blank" rel="noopener noreferrer"><code>data:</code> URL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼Œå› æ­¤æˆ‘ä»¬åªè¦å°†æ–‡ä»¶å†…å®¹è¿›è¡Œä¸‹è½½è½¬åŒ–æˆ <code>blob</code> å°±å¯ä»¥äº†ã€‚</p> <p>æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200830174735143.png" alt="image-20200830174735143"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oBtnDownload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹å‡»ä¸‹è½½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">import</span> <span class="token punctuation">{</span>downloadByBlob<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../js/utils.js'</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">download</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
                url<span class="token punctuation">,</span>
                responseType<span class="token operator">:</span> <span class="token string">'blob'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">downloadByBlob</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">,</span> url<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span> 
        <span class="token punctuation">}</span>
        oBtnDownload<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8888/api/downloadUrl'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">download</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ç°åœ¨éåŒæºçš„ä¹Ÿå¯ä»¥æ„‰å¿«åœ°ä¸‹è½½å•¦ã€‚</p> <h3 id="åç«¯è¿”å›å­—ç¬¦ä¸²-base64"><a href="#åç«¯è¿”å›å­—ç¬¦ä¸²-base64" class="header-anchor">#</a> åç«¯è¿”å›å­—ç¬¦ä¸²ï¼ˆbase64ï¼‰</h3> <p>æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿä¼šé‡åˆ°ä¸€äº›æ–°æ‰‹åç«¯è¿”å›å­—ç¬¦ä¸²çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µå¾ˆå°‘è§ï¼Œä½†æ˜¯æ¥äº†æˆ‘ä»¬ä¹Ÿä¸æ…Œï¼Œé¡ºä¾¿å¯ä»¥å‘åç«¯å°å“¥ç§€ä¸€æ³¢æ“ä½œï¼Œä¸ç®¡å•¥æ•°æ®ï¼Œå’±éƒ½èƒ½ç»™ä½ ä¸‹è½½ä¸‹æ¥ã€‚</p> <blockquote><p>ps: å‰ææ˜¯å®‰å…¨æ— æ±¡æŸ“çš„èµ„æº ğŸ˜ƒ  , æ­£ç»æ–‡ç« çš„æ‹›ç‰Œé—ªé—ªå‘å…‰ã€‚</p></blockquote> <p>è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘éœ€è¦æ¨¡æ‹Ÿä¸‹åç«¯å°å“¥çš„éªšæ“ä½œï¼Œå› æ­¤æœ‰åç«¯ä»£ç ã€‚</p> <p><img src="https://s3.qiufeng.blue/blog/994b6f2egy1fgryfevtpvj208c08cmxd.jpg" alt="994b6f2egy1fgryfevtpvj208c08cmxd"></p> <p>æ ¸å¿ƒè¿‡ç¨‹</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200830174752476.png" alt="image-20200830174752476"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node ç«¯</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/base64'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> filename <span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
    <span class="token keyword">const</span> content <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./static/'</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> fStats <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./static/'</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fStats<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
        code<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
            base64<span class="token operator">:</span> content<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'base64'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            filename<span class="token punctuation">,</span>
            type<span class="token operator">:</span> mime<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code>// å‰ç«¯
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oBtnDownload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹å‡»ä¸‹è½½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>base64ToBlob<span class="token punctuation">,</span> downloadByBlob<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../js/utils.js'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">download</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> base64<span class="token punctuation">,</span> filename<span class="token punctuation">,</span> type <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token function">base64ToBlob</span><span class="token punctuation">(</span>blob<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">downloadByBlob</span><span class="token punctuation">(</span>blob<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
oBtnDownload<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8888/api/base64?filename=1597375650384.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">download</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ€è·¯å…¶å®è¿˜æ˜¯åˆ©ç”¨äº†æˆ‘ä»¬ä¸Šé¢è¯´çš„ <code>&lt;a&gt;</code> æ ‡ç­¾ã€‚ä½†æ˜¯åœ¨è¿™ä¸ªæ­¥éª¤å‰ï¼Œå¤šäº†ä¸€ä¸ªæ­¥éª¤å°±æ˜¯ï¼Œéœ€è¦å°†æˆ‘ä»¬çš„ <code>base64</code> å­—ç¬¦ä¸²è½¬åŒ–ä¸ºäºŒè¿›åˆ¶æµï¼Œè¿™ä¸ªä¸œè¥¿ï¼Œåœ¨æˆ‘çš„å‰ä¸€ç¯‡æ–‡ä»¶ä¸Šä¼ ä¸­ä¹Ÿå¸¸å¸¸æåˆ°ï¼Œæ¯•ç«Ÿæ–‡ä»¶å°±æ˜¯ä»¥äºŒè¿›åˆ¶æµçš„å½¢å¼å­˜åœ¨ã€‚ä¸è¿‡ä¹Ÿå¾ˆç®€å•ï¼Œjs æ‹¥æœ‰å†…ç½®å‡½æ•° <code>atob</code>ã€‚ æå¤§åœ°æé«˜äº†æˆ‘ä»¬è½¬æ¢çš„æ•ˆç‡ã€‚</p> <h2 id="çº¯å‰ç«¯"><a href="#çº¯å‰ç«¯" class="header-anchor">#</a> çº¯å‰ç«¯</h2> <p>ä¸Šé¢ä»‹ç»å€ŸåŠ©åç«¯æ¥å®Œæˆæ–‡ä»¶ä¸‹è½½çš„ç›¸å…³æ–¹æ³•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä»‹ç»ä»‹ç»çº¯å‰ç«¯æ¥å®Œæˆæ–‡ä»¶ä¸‹è½½çš„ä¸€äº›æ–¹æ³•ã€‚</p> <p>æ–¹æ³•ä¸€:  <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/URL.createObjectURL" target="_blank" rel="noopener noreferrer"><code>blob:</code> URL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="https://s3.qiufeng.blue/blog/image-20200831230800538.png" alt="image-20200831230800538"></p> <p>æ–¹æ³•äºŒ: <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" target="_blank" rel="noopener noreferrer"><code>data:</code> URL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="https://s3.qiufeng.blue/blog/image-20200831230810963.png" alt="image-20200831230810963"></p> <p>ç”±äº data:URL ä¼šæœ‰é•¿åº¦çš„é™åˆ¶ï¼Œå› æ­¤ä¸‹é¢çš„æ‰€æœ‰ä¾‹å­éƒ½ä¼šé‡‡ç”¨ blob çš„æ–¹å¼æ¥è¿›è¡Œæ¼”ç¤ºã€‚</p> <h3 id="json-text"><a href="#json-text" class="header-anchor">#</a> json/text</h3> <p>ä¸‹è½½textå’Œjsonéå¸¸çš„ç®€å•ï¼Œå¯ä»¥ç›´æ¥æ„é€ ä¸€ä¸ª Blobã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>Blob(blobParts[, options])
è¿”å›ä¸€ä¸ªæ–°åˆ›å»ºçš„ Blob å¯¹è±¡ï¼Œå…¶å†…å®¹ç”±å‚æ•°ä¸­ç»™å®šçš„æ•°ç»„ä¸²è”ç»„æˆã€‚
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code>// html
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textBtn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ä¸‹è½½æ–‡æœ¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>json<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">disabled</span><span class="token punctuation">&gt;</span></span>
{
    &quot;name&quot;: &quot;ç§‹é£çš„ç¬”è®°&quot;
}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jsonBtn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ä¸‹è½½JSON<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>downloadByContent<span class="token punctuation">,</span> downloadByDataURL<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../js/utils.js'</span><span class="token punctuation">;</span>
textBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> value <span class="token operator">=</span> text<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token function">downloadByContent</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token string">'hello.txt'</span><span class="token punctuation">,</span> <span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  		<span class="token comment">// downloadByDataURL(value, 'hello.txt', 'text/plain');</span>
<span class="token punctuation">}</span>
jsonBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> value <span class="token operator">=</span> json<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token function">downloadByContent</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token string">'hello.json'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// downloadByDataURL(value, 'hello.json', 'application/json');</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ•ˆæœå›¾</p> <p><img src="https://s3.qiufeng.blue/blog/2020-08-30-17.53.32.gif" alt="2020-08-30-17.53.32"></p> <p>æ³¨é‡Šä»£ç ä¸º data:URL çš„å±•ç¤ºéƒ¨åˆ†ï¼Œç”±äºæ˜¯ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œå› æ­¤æˆ‘è®²å±•ç¤ºä»£ç ï¼Œåé¢éƒ½çœç•¥äº†ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨ <code>downloadByDataURL</code> æ–¹æ³•ï¼Œæ‰¾ä¸åˆ°è¯¥æ–¹æ³•çš„å®šä¹‰è¯·æ»‘åˆ°æ–‡ç« å¼€å¤´å“¦~</p> <h3 id="excel"><a href="#excel" class="header-anchor">#</a> excel</h3> <p>excel å¯ä»¥è¯´æ˜¯æˆ‘ä»¬éƒ¨åˆ†å‰ç«¯æ‰“äº¤é“å¾ˆæ·±çš„ä¸€ä¸ªåœºæ™¯ï¼Œä»€ä¹ˆæ•°æ®ä¸­å°ï¼Œå¤©å¤©éœ€è¦å¯¼å‡ºå„ç§æŠ¥è¡¨ã€‚ä»¥å‰éƒ½æ˜¯å‰ç«¯è¯·æ±‚åç«¯ï¼Œæ¥è·å–ä¸€ä¸ª excel æ–‡ä»¶åœ°å€ã€‚ç°åœ¨è®©æˆ‘ä»¬æ¥å±•ç¤ºä¸‹çº¯å‰ç«¯æ˜¯å¦‚ä½•å®ç°ä¸‹è½½excelã€‚</p> <p><strong>ç®€å•excel</strong></p> <p>è¡¨æ ¼é•¿è¿™ä¸ªæ¨¡æ ·ï¼Œæ¯”è¾ƒç®€é™‹çš„å½¢å¼</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200829170347728.png" alt="image-20200829170347728"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> template <span class="token operator">=</span> <span class="token string">'&lt;html xmlns:o=&quot;urn:schemas-microsoft-com:office:office&quot; '</span>
            <span class="token operator">+</span><span class="token string">'xmlns:x=&quot;urn:schemas-microsoft-com:office:excel&quot; '</span>
            <span class="token operator">+</span><span class="token string">'xmlns=&quot;http://www.w3.org/TR/REC-html40&quot;&gt;'</span>
            <span class="token operator">+</span><span class="token string">'&lt;head&gt;'</span>
            <span class="token operator">+</span><span class="token string">'&lt;/head&gt;'</span>
            <span class="token operator">+</span><span class="token string">'&lt;body&gt;&lt;table border=&quot;1&quot; style=&quot;width:60%; text-align: center;&quot;&gt;{table}&lt;/table&gt;&lt;\/body&gt;'</span>
            <span class="token operator">+</span><span class="token string">'&lt;\/html&gt;'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> context <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'{table}'</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'excel'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">downloadByContent</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">'qiufengblue.xls'</span><span class="token punctuation">,</span> <span class="token string">'application/vnd.ms-excel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½†æ˜¯ç¼–å†™å¹¶ä¸å¤æ‚ï¼Œä¾æ—§æ˜¯å’Œæˆ‘ä»¬ä¹‹å‰ä¸€æ ·ï¼Œé€šè¿‡æ„é€ å‡º <code>excel</code> çš„æ ¼å¼ï¼Œè½¬åŒ–æˆ blob æ¥è¿›è¡Œä¸‹è½½ã€‚</p> <p>æœ€ç»ˆå¯¼å‡ºçš„æ•ˆæœ</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200829170625763.png" alt="image-20200829170625763"></p> <p><strong>element-ui å¯¼å‡ºè¡¨æ ¼</strong></p> <p>æ²¡é”™ï¼Œè¿™ä¸ªå°±æ˜¯ <code>element-ui</code> å®˜æ–¹<code>table</code> çš„ä¾‹å­ã€‚</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200829170543891.png" alt="image-20200829170543891"></p> <p>å¯¼å‡ºæ•ˆæœå¦‚ä¸‹ï¼Œå¯ä»¥è¯´éå¸¸å®Œç¾ã€‚</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200829170912128.png" alt="image-20200829170912128"></p> <p>è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†ä¸€ä¸ªæ’ä»¶ https://github.com/SheetJS/sheetjs</p> <p>ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ã€‚</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ele<span class="token punctuation">&quot;</span></span> <span class="token attr-name">border</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tableData<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100%</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>date<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æ—¥æœŸ<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>180<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å§“å<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>180<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åœ°å€<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exportExcel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å¯¼å‡ºexcel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token operator">...</span>
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">exportExcel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> wb <span class="token operator">=</span> <span class="token constant">XLSX</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">table_to_book</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'ele'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token constant">XLSX</span><span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>wb<span class="token punctuation">,</span> <span class="token string">'qiufeng.blue.xlsx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><img src="https://s3.qiufeng.blue/blog/6af89bc8gw1f8srz9343vj205i05ijr9.jpg" alt="å®Œç¾è¡¨æƒ…"></p> <h3 id="word"><a href="#word" class="header-anchor">#</a> word</h3> <p>è®²å®Œäº† <code>excel</code>æˆ‘ä»¬å†æ¥è®²è®² <code>word</code> è¿™å¯æ˜¯ office ä¸‰å‰‘å®¢å¦å¤–ä¸€å¤§åˆ©å™¨ã€‚è¿™é‡Œæˆ‘ä»¬ä¾æ—§æ˜¯åˆ©ç”¨ä¸Šè¿°çš„ blob çš„æ–¹æ³•è¿›è¡Œä¸‹è½½ã€‚</p> <p><strong>ç®€å•ç¤ºä¾‹</strong></p> <p><img src="https://s3.qiufeng.blue/blog/2020-08-29-20.13.25.gif" alt="2020-08-29-20.13.25"></p> <p>ä»£ç å±•ç¤º</p> <div class="language-js extra-class"><pre class="language-js"><code>exportWord<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> template <span class="token operator">=</span> <span class="token string">'&lt;html xmlns:o=&quot;urn:schemas-microsoft-com:office:office&quot; '</span>
            <span class="token operator">+</span><span class="token string">'xmlns:x=&quot;urn:schemas-microsoft-com:office:word&quot; '</span>
            <span class="token operator">+</span><span class="token string">'xmlns=&quot;http://www.w3.org/TR/REC-html40&quot;&gt;'</span>
            <span class="token operator">+</span><span class="token string">'&lt;head&gt;'</span>
            <span class="token operator">+</span><span class="token string">'&lt;/head&gt;'</span>
            <span class="token operator">+</span><span class="token string">'&lt;body&gt;{table}&lt;\/body&gt;'</span>
            <span class="token operator">+</span><span class="token string">'&lt;\/html&gt;'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> context <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'{table}'</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'word'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">downloadByContent</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">'qiufeng.blue.doc'</span><span class="token punctuation">,</span> <span class="token string">'application/msword'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ•ˆæœå±•ç¤º</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200830164208184.png" alt="image-20200830164208184"></p> <p><strong>ä½¿ç”¨ <code>docx.js</code>æ’ä»¶</strong></p> <p>å¦‚æœä½ æƒ³æœ‰æ›´é«˜çº§çš„ç”¨æ³•ï¼Œå¯ä»¥ä½¿ç”¨ <code>docx.js</code>è¿™ä¸ªåº“ã€‚å½“ç„¶ç”¨ä¸Šè¿°æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥é«˜çº§å®šåˆ¶çš„ã€‚</p> <p>ä»£ç </p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>generate()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ä¸‹è½½word<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
                url<span class="token operator">:</span> <span class="token string">'http://localhost:8888/static/1597375650384.jpg'</span><span class="token punctuation">,</span>
                responseType<span class="token operator">:</span> <span class="token string">'blob'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> doc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">docx<span class="token punctuation">.</span>Document</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> image1 <span class="token operator">=</span> docx<span class="token punctuation">.</span>Media<span class="token punctuation">.</span><span class="token function">addImage</span><span class="token punctuation">(</span>doc<span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span>
            doc<span class="token punctuation">.</span><span class="token function">addSection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                properties<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                children<span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token keyword">new</span> <span class="token class-name">docx<span class="token punctuation">.</span>Paragraph</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        children<span class="token operator">:</span> <span class="token punctuation">[</span>
                            <span class="token keyword">new</span> <span class="token class-name">docx<span class="token punctuation">.</span>TextRun</span><span class="token punctuation">(</span><span class="token string">&quot;æ¬¢è¿å…³æ³¨[ç§‹é£çš„ç¬”è®°]å…¬ä¼—å·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">break</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token keyword">new</span> <span class="token class-name">docx<span class="token punctuation">.</span>TextRun</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">break</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token keyword">new</span> <span class="token class-name">docx<span class="token punctuation">.</span>TextRun</span><span class="token punctuation">(</span><span class="token string">&quot;å®šæœŸå‘é€ä¼˜è´¨æ–‡ç« &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">break</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token keyword">new</span> <span class="token class-name">docx<span class="token punctuation">.</span>TextRun</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">break</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token keyword">new</span> <span class="token class-name">docx<span class="token punctuation">.</span>TextRun</span><span class="token punctuation">(</span><span class="token string">&quot;ç¾å›¢ç‚¹è¯„2020æ ¡æ‹›-å†…æ¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">break</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token keyword">new</span> <span class="token class-name">docx<span class="token punctuation">.</span>Paragraph</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

            docx<span class="token punctuation">.</span>Packer<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">blob</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">saveAs</span><span class="token punctuation">(</span>blob<span class="token punctuation">,</span> <span class="token string">&quot;qiufeng.blue.docx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Document created successfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ•ˆæœï¼ˆæ²¡æœ‰æ‰“å¹¿å‘Š...éšä¾¿æ‰¾äº†å¼ å›¾ï¼Œå¼ºè¡Œä¸æ‰¿è®¤ç³»åˆ—ï¼‰</p> <p><img src="https://s3.qiufeng.blue/blog/9150e4e5ly1fl8qavz6quj20hs0hsjvl.jpg" alt="9150e4e5ly1fl8qavz6quj20hs0hsjvl"></p> <p><img src="https://s3.qiufeng.blue/blog/2020-08-30-18.32.09.gif" alt="2020-08-30-18.32.09"></p> <h3 id="zipä¸‹è½½"><a href="#zipä¸‹è½½" class="header-anchor">#</a> zipä¸‹è½½</h3> <p>å‰ç«¯å‹ç¼©è¿˜æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œåœ¨ä¸€å®šçš„åœºæ™¯ä¸‹ï¼Œå¯ä»¥èŠ‚çœæµé‡ã€‚è€Œè¿™ä¸ªåœºæ™¯æ¯”è¾ƒä½¿ç”¨äºï¼Œä¾‹å¦‚å‰ç«¯æ‰“åŒ…å›¾ç‰‡ä¸‹è½½ã€å‰ç«¯æ‰“åŒ…ä¸‹è½½å›¾æ ‡ã€‚</p> <p>ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæˆ‘ https://tinypng.com/ å°±æ˜¯ç”¨äº†è¿™ä¸ªï¼Œç»“æœæˆ‘å‘ç°æˆ‘é”™äº†...ä»”ç»†ä¸€æƒ³ï¼Œå› ä¸ºå®ƒå‹ç¼©å¥½çš„å›¾ç‰‡æ˜¯å­˜åœ¨åç«¯çš„ï¼Œå¦‚æœä½¿ç”¨å‰ç«¯æ‰“åŒ…çš„è¯ï¼Œåè€Œè¦å»è¯·æ±‚æ‰€æœ‰å‹ç¼©çš„å›¾ç‰‡ä»è€Œæ¥è·å–å›¾ç‰‡æµã€‚å¦‚æœç”¨åç«¯å‹ç¼©è¯ï¼Œå¯ä»¥æœ‰æ•ˆèŠ‚çœæµé‡ã€‚å—¯ã€‚ã€‚ã€‚å¤±è´¥ä¾‹å­å‘Šç»ˆã€‚</p> <p>åæ¥åˆä»¥ä¸ºhttps://www.iconfont.cn/æ‰“åŒ…ä¸‹è½½å›¾æ ‡çš„æ—¶å€™ï¼Œä½¿ç”¨äº†è¿™ä¸ªæ–¹æ¡ˆ....å‘ç°....æˆ‘åˆé”™äº†...ä½†æ˜¯æˆ‘ä»¬åˆ†æä¸€ä¸‹.</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200829204540440.png" alt="image-20200829204540440"></p> <p>å®ƒå®˜ç½‘éƒ½æ˜¯ svg æ¸²æŸ“çš„å›¾æ ‡ï¼Œå¯¹äº svg ä¸‹è½½çš„æ—¶å€™ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨å‰ç«¯æ‰“åŒ…ä¸‹è½½ã€‚ä½†æ˜¯ï¼Œå®ƒè¿˜æ”¯æŒ font ä»¥åŠ jpg æ ¼å¼ï¼Œæ‰€ä»¥ä¸ºäº†ç»Ÿä¸€ï¼Œé‡‡ç”¨äº†åç«¯ä¸‹è½½ï¼Œèƒ½å¤Ÿç†è§£ã€‚é‚£æˆ‘ä»¬å°±æ¥å®ç°è¿™ä¸ªå®ƒæœªå®Œæˆçš„åŠŸèƒ½ï¼Œå½“ç„¶æˆ‘ä»¬è¿˜éœ€è¦ç”¨åˆ°ä¸€ä¸ªæ’ä»¶ï¼Œå°±æ˜¯ <a href="https://github.com/Stuk/jszip" target="_blank" rel="noopener noreferrer">jszip<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <p>è¿™é‡Œæˆ‘ä»ä»¥ä¸Šæ‰¾äº†ä¸¤ä¸ª svg çš„å›¾æ ‡ã€‚</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200829204937044.png" alt="image-20200829204937044"></p> <p>å®ç°ä»£ç </p> <div class="language-js extra-class"><pre class="language-js"><code>download<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> zip <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSZip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> svgList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            id<span class="token operator">:</span> <span class="token string">'demo1'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            id<span class="token operator">:</span> <span class="token string">'demo2'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
        svgList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            zip<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">'.svg'</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        zip<span class="token punctuation">.</span><span class="token function">generateAsync</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
            type<span class="token operator">:</span> <span class="token string">'blob'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ä¸‹è½½çš„æ–‡ä»¶å</span>
            <span class="token keyword">var</span> filename <span class="token operator">=</span> <span class="token string">'svg'</span> <span class="token operator">+</span> <span class="token string">'.zip'</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ›å»ºéšè—çš„å¯ä¸‹è½½é“¾æ¥</span>
            <span class="token keyword">var</span> eleLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            eleLink<span class="token punctuation">.</span>download <span class="token operator">=</span> filename<span class="token punctuation">;</span>
            <span class="token comment">// ä¸‹è½½å†…å®¹è½¬å˜æˆblobåœ°å€</span>
            eleLink<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// è§¦å‘ç‚¹å‡»</span>
            eleLink<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ç„¶åç§»é™¤</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><img src="https://s3.qiufeng.blue/blog/2020-08-29-20.52.42.gif" alt="2020-08-29-20.52.42"></p> <p>æŸ¥çœ‹æ–‡ä»¶å¤¹ç›®å½•ï¼Œå·²ç»å°† SVG æ‰“åŒ…ä¸‹è½½å®Œæ¯•ã€‚</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200829205329532.png" alt="image-20200829205329532"></p> <h3 id="æµè§ˆå™¨æ–‡ä»¶ç³»ç»Ÿ-å®éªŒæ€§"><a href="#æµè§ˆå™¨æ–‡ä»¶ç³»ç»Ÿ-å®éªŒæ€§" class="header-anchor">#</a> æµè§ˆå™¨æ–‡ä»¶ç³»ç»Ÿï¼ˆå®éªŒæ€§ï¼‰</h3> <p><img src="https://s3.qiufeng.blue/blog/image-20200817234129788.png" alt="image-20200817234129788"></p> <p>åœ¨æˆ‘ç”µè„‘ä¸Šéƒ½æœ‰è¿™ä¹ˆä¸€ä¸ªæµè§ˆå™¨ï¼Œç”¨æ¥å­¦ä¹ å’Œè°ƒè¯• <code>chrome</code> çš„æœ€æ–°æ–°ç‰¹æ€§, å¦‚æœä½ çš„ç”µè„‘æ²¡æœ‰ï¼Œå»ºè®®ä½ å®‰è£…ä¸€ä¸ªã€‚</p> <p>ç©è¿™ä¸ªç‰¹æ€§éœ€è¦æ‰“å¼€ chrome çš„å®éªŒç‰¹æ€§ <code>chrome://flags</code> =&gt; <code>#native-file-system-api</code> =&gt; <code>enable</code>, å› ä¸ºå®éªŒç‰¹æ€§éƒ½ä¼šä¼´éšä¸€äº›å®‰å…¨æˆ–è€…å½±å“åŸæœ¬çš„æ¸²æŸ“çš„è¡Œä¸ºï¼Œå› æ­¤æˆ‘å†æ¬¡å¼ºçƒˆå»ºè®®ï¼Œä¸‹è½½ä¸€ä¸ªé‡‘ä¸é›€ç‰ˆæœ¬çš„ chrome æ¥è¿›è¡Œç©è€ã€‚</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textarea<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ä¸‹è½½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span><span class="token function">chooseFileSystemEntries</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            type<span class="token operator">:</span> <span class="token string">'save-file'</span><span class="token punctuation">,</span>
            accepts<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                description<span class="token operator">:</span> <span class="token string">'Text file'</span><span class="token punctuation">,</span>
                extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'txt'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                mimeTypes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'text/plain'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> writer <span class="token operator">=</span> <span class="token keyword">await</span> handler<span class="token punctuation">.</span><span class="token function">createWritable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>textarea<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å®ç°èµ·æ¥éå¸¸ç®€å•ã€‚å´é£ä¸€èˆ¬çš„æ„Ÿè§‰ã€‚</p> <p><img src="https://s3.qiufeng.blue/blog/2020-08-18-00.13.29.gif" alt="2020-08-18-00.13.29"></p> <h2 id="å…¶ä»–åœºæ™¯"><a href="#å…¶ä»–åœºæ™¯" class="header-anchor">#</a> å…¶ä»–åœºæ™¯</h2> <h3 id="h5æ–‡ä»¶ä¸‹è½½"><a href="#h5æ–‡ä»¶ä¸‹è½½" class="header-anchor">#</a> H5æ–‡ä»¶ä¸‹è½½</h3> <p>ä¸€èˆ¬åœ¨ h5 ä¸‹è½½æ¯”è¾ƒå¤šçš„æ˜¯ pdf æˆ–è€…æ˜¯ apk çš„ä¸‹è½½ã€‚</p> <h4 id="android"><a href="#android" class="header-anchor">#</a> Android</h4> <p>åœ¨å®‰å“æµè§ˆå™¨ä¸­ï¼Œæµè§ˆå™¨ç›´æ¥ä¸‹è½½æ–‡ä»¶ã€‚</p> <h4 id="ios"><a href="#ios" class="header-anchor">#</a> ios</h4> <p>ç”±äºiosçš„é™åˆ¶ï¼Œæ— æ³•è¿›è¡Œä¸‹è½½ï¼Œå› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨å¤åˆ¶ url ï¼Œæ¥ä»£æ›¿ä¸‹è½½ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>downloadDirect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../js/utils.js'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#download-ios'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(iPhone|iPad|iPod|iOS)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> clipboard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClipboardJS</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    clipboard<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'å·²å¤åˆ¶é“¾æ¥ï¼Œæ‰“å¼€æµè§ˆå™¨ç²˜è´´é“¾æ¥ä¸‹è½½'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    clipboard<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'ç³»ç»Ÿç‰ˆæœ¬è¿‡ä½ï¼Œå¤åˆ¶é“¾æ¥å¤±è´¥'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">downloadDirect</span><span class="token punctuation">(</span>btn<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>clipboardText<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="æ›´å¤š"><a href="#æ›´å¤š" class="header-anchor">#</a> æ›´å¤š</h4> <p>å¯¹äº apk ç­‰ä¸‹è½½åŒ…å¯ä»¥ä½¿ç”¨è¿™ä¸ªåŒ…ï¼ˆæœ¬äººæš‚æ—¶æ²¡æœ‰è¯•éªŒï¼Œæ¥è§¦ä¸å¤šï¼Œå›å¤´ç†Ÿæ‚‰äº†å†å›æ¥è¡¥å……ã€‚ï¼‰</p> <p>https://github.com/jawidx/web-launch-app</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200830145258473.png" alt="image-20200830145258473"></p> <h3 id="å¤§æ–‡ä»¶çš„åˆ†ç‰‡ä¸‹è½½"><a href="#å¤§æ–‡ä»¶çš„åˆ†ç‰‡ä¸‹è½½" class="header-anchor">#</a> å¤§æ–‡ä»¶çš„åˆ†ç‰‡ä¸‹è½½</h3> <p>æœ€è¿‘åœ¨å¼€å‘åª’ä½“æµç›¸å…³çš„å·¥ä½œçš„æ—¶å€™ï¼Œå‘ç°åœ¨åŠ è½½ mp4 æ–‡ä»¶çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„ç°è±¡ï¼Œè§†é¢‘æµå¹¶ä¸éœ€è¦å°†æ•´ä¸ª mp4 ä¸‹è½½å®Œæ‰è¿›è¡Œæ’­æ”¾ï¼Œå¹¶ä¸”ä¼´éšäº†å¾ˆå¤šçŠ¶æ€ç ä¸º 206 çš„è¯·æ±‚ï¼Œä¹ä¸€çœ‹æœ‰ç‚¹åƒæµåª’ä½“(HLSç­‰)çš„éŸµå‘³ã€‚</p> <p><img src="https://s3.qiufeng.blue/blog/2020-08-29-21.31.29.gif" alt="2020-08-29-21.31.29"></p> <p>è§‰å¾—è¿™ä¸ªç°è±¡éå¸¸çš„æœ‰æ„æ€ï¼Œä»–èƒ½å¤Ÿåˆ†ç‰‡åœ°åŠ è½½èµ„æºï¼Œè¿™å¯¹äºä½“éªŒæˆ–è€…æ˜¯æµé‡çš„èŠ‚çœéƒ½æ˜¯éå¸¸å¤§çš„å¸®åŠ©ã€‚æœ€ç»ˆå‘ç°å®ƒå¸¦äº†ä¸€ä¸ªåä¸º Range çš„å¤´ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ MDN çš„è§£é‡Šã€‚</p> <blockquote><p>The <strong><code>Range</code></strong> æ˜¯ä¸€ä¸ªè¯·æ±‚é¦–éƒ¨ï¼Œå‘ŠçŸ¥æœåŠ¡å™¨è¿”å›æ–‡ä»¶çš„å“ªä¸€éƒ¨åˆ†ã€‚åœ¨ä¸€ä¸ª <code>Range</code> é¦–éƒ¨ä¸­ï¼Œå¯ä»¥ä¸€æ¬¡æ€§è¯·æ±‚å¤šä¸ªéƒ¨åˆ†ï¼ŒæœåŠ¡å™¨ä¼šä»¥ multipart æ–‡ä»¶çš„å½¢å¼å°†å…¶è¿”å›ã€‚å¦‚æœæœåŠ¡å™¨è¿”å›çš„æ˜¯èŒƒå›´å“åº”ï¼Œéœ€è¦ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/206" target="_blank" rel="noopener noreferrer"><code>206</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <code>Partial Content</code> çŠ¶æ€ç ã€‚  æ‘˜è‡ª MDN</p></blockquote> <p>è¯­æ³•</p> <div class="language- extra-class"><pre class="language-text"><code>Range: &lt;unit&gt;=&lt;range-start&gt;-
Range: &lt;unit&gt;=&lt;range-start&gt;-&lt;range-end&gt;
Range: &lt;unit&gt;=&lt;range-start&gt;-&lt;range-end&gt;, &lt;range-start&gt;-&lt;range-end&gt;
Range: &lt;unit&gt;=&lt;range-start&gt;-&lt;range-end&gt;, &lt;range-start&gt;-&lt;range-end&gt;, &lt;range-start&gt;-&lt;range-end&gt;
</code></pre></div><h4 id="nodeå®ç°"><a href="#nodeå®ç°" class="header-anchor">#</a> Nodeå®ç°</h4> <p>æ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†å®ƒçš„åŸç†ï¼Œå°±æ¥è‡ªå·±å®ç°ä¸€ä¸‹ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/rangeFile'</span><span class="token punctuation">,</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> filename <span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> size <span class="token punctuation">}</span> <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./static/'</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> range <span class="token operator">=</span> ctx<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'range'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>range<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Accept-Ranges'</span><span class="token punctuation">,</span> <span class="token string">'bytes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./static/'</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> start<span class="token punctuation">,</span> end <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getRange</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">&gt;=</span> size <span class="token operator">||</span> end <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">416</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Content-Range'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">bytes */</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    ctx<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">206</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Accept-Ranges'</span><span class="token punctuation">,</span> <span class="token string">'bytes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Content-Range'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">bytes </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>start<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>end <span class="token operator">?</span> end <span class="token operator">:</span> size <span class="token operator">-</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./static/'</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> start<span class="token punctuation">,</span> end <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="nginxå®ç°"><a href="#nginxå®ç°" class="header-anchor">#</a> Nginxå®ç°</h4> <p>å‘ç° nginx ä¸éœ€è¦å†™ä»»ä½•ä»£ç å°±é»˜è®¤æ”¯æŒäº† range å¤´ï¼Œæƒ³ç€æˆ‘ä¸€å®šçŸ¥é“å®ƒåˆ°åº•æ˜¯æ”¯æŒï¼Œè¿˜æ˜¯åŠ å…¥äº†ä»€ä¹ˆæ¨¡å—ï¼Œæˆ–è€…æ˜¯æˆ‘é»˜è®¤å¼€å¯äº†ä»€ä¹ˆé…ç½®ï¼Œæ‰¾äº†åŠå¤©æ²¡æœ‰æ‰¾åˆ°ä»€ä¹ˆé¢å¤–çš„é…ç½®ã€‚</p> <p><img src="https://s3.qiufeng.blue/blog/3630px-Nginx_logo-1.png" alt="3630px-Nginx_logo-1"></p> <p>æ­£å½“æˆ‘å‡†å¤‡æ”¾å¼ƒçš„æ—¶å€™ï¼Œçµå…‰ä¸€ç°ï¼Œå»çœ‹çœ‹æºç å§ï¼Œè¯´ä¸å®šä¼šæœ‰å‘ç°ï¼Œå»æŸ¥äº† nginx æºç ç›¸å…³çš„å†…å®¹ï¼Œç”¨äº†æƒ¯ç”¨çš„åæ¨æ–¹å¼ï¼Œæ‰å‘ç°åŸæ¥æ˜¯<code>max_ranges</code>è¿™ä¸ªå­—æ®µã€‚</p> <p>https://github.com/nginx/nginx/blob/release-1.13.6/src/http/modules/ngx_http_range_filter_module.c#L166</p> <p>è¿™ä¹Ÿæ€ªæˆ‘ä¸€å¼€å§‹æ–‡æ¡£é˜…è¯»ä¸å¤Ÿä»”ç»†ï¼Œæµªè´¹äº†å¤§é‡çš„æ—¶é—´ã€‚</p> <p>ğŸ˜ƒ å…¶å®æˆ‘å¯¹ nginx æºç ä¹Ÿä¸ç†Ÿæ‚‰ï¼Œè¿™é‡Œå¯ä»¥ç”¨ä¸ªå°æŠ€å·§ï¼Œç›´æ¥åœ¨æºç åº“ æœç´¢ 206 ç„¶å å‘ç°äº†ä¸€ä¸ªå®å‘½ä»¤</p> <div class="language- extra-class"><pre class="language-text"><code>#define NGX_HTTP_PARTIAL_CONTENT           206
</code></pre></div><p>ç„¶åé¡ºè—¤æ‘¸ç“œï¼Œç›´æ¥æ‰¾åˆ°è¿™ä¸ªå®å‘½ä»¤<code>NGX_HTTP_PARTIAL_CONTENT</code>ç”¨åˆ°çš„åœ°æ–¹ï¼Œè¿™æ ·ä¸€æ­¥ä¸€æ­¥å°±æ…¢æ…¢èƒ½æ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„ã€‚</p> <p>é»˜è®¤ nginx æ˜¯è‡ªåŠ¨å¼€å¯ range å¤´çš„, å¦‚æœä¸éœ€è¦é…ç½®ï¼Œåˆ™é…ç½® <code>max_range: 0;</code></p> <p>Nginx é…ç½®æ–‡æ¡£ http://nginx.org/en/docs/http/ngx_http_core_module.html#max_ranges</p> <h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h2> <p>æˆ‘ä»¬å¯ä»¥æ¥æ€»ç»“ä¸€ä¸‹ï¼Œå…¶å®å…¨æ–‡ä¸»è¦è®²äº†(xbb)ä¸¤ä¸ªæ ¸å¿ƒçš„çŸ¥è¯†ï¼Œä¸€ä¸ªæ˜¯ <code>blob</code> ä¸€ä¸ª<code>a</code> æ ‡ç­¾ï¼Œå¦å¤–è¿˜è¦æ³¨æ„å¯¹äºå¤§æ–‡ä»¶ï¼ŒæœåŠ¡å™¨çš„ä¼˜åŒ–ç­–ç•¥ï¼Œå¯ä»¥é€šè¿‡ <code>Range</code> æ¥åˆ†ç‰‡åŠ è½½ã€‚</p> <p><img src="https://s3.qiufeng.blue/blog/image-20200830181216353.png" alt="image-20200830181216353"></p> <h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="header-anchor">#</a> å‚è€ƒèµ„æ–™</h2> <p>https://github.com/dolanmiu/docx</p> <p>https://github.com/SheetJS/sheetjs</p> <p>https://juejin.im/post/6844903763359039501</p> <h2 id="æœ€å"><a href="#æœ€å" class="header-anchor">#</a> æœ€å</h2> <p>å¦‚æœæˆ‘çš„æ–‡ç« æœ‰å¸®åŠ©åˆ°ä½ ï¼Œå¸Œæœ›ä½ ä¹Ÿèƒ½å¸®åŠ©æˆ‘ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å· <code>ç§‹é£çš„ç¬”è®°</code>ï¼Œå›å¤<code>å¥½å‹</code> äºŒæ¬¡ï¼Œå¯åŠ å¾®ä¿¡å¹¶ä¸”åŠ å…¥äº¤æµç¾¤ï¼Œ<code>ç§‹é£çš„ç¬”è®°</code> å°†ä¸€ç›´é™ªä¼´ä½ çš„å·¦å³ã€‚</p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/8/2021, 1:38:24 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/node/mutiple-download.html" class="prev">å‰ç«¯å¤šçº¿ç¨‹å¤§æ–‡ä»¶ä¸‹è½½å®è·µï¼Œæé€Ÿ10å€+</a></span> <span class="next"><a href="/node/upload.html"> ä¸€æ–‡äº†è§£æ–‡ä»¶ä¸Šä¼ å…¨è¿‡ç¨‹ï¼ˆ1.8wå­—æ·±åº¦è§£æï¼Œè¿›é˜¶å¿…å¤‡ï¼‰</a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/app.e2f2ddea.js" defer></script><script src="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/3.55d2eec7.js" defer></script><script src="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/2.bf4393a2.js" defer></script><script src="https://cdn.jsdelivr.net/gh/hua1995116/vuepress-blog@master/docs/.vuepress/dist/assets/js/84.f92609d9.js" defer></script>
  </body>
</html>
